è¿™é¢˜æˆ‘æ”¶ä¸‹ğŸ˜ã€‚æˆ‘ä¼šæŒ‰ç…§ã€Œ**ç”±æµ…å…¥æ·±ã€ä»ç†å¿µåˆ°æºç **ã€çš„ç»“æ„å†™ï¼Œè®©æœ‰ React å®æˆ˜ç»éªŒä½†æ²¡ç ”ç©¶è¿‡åº•å±‚çš„äººï¼Œèƒ½çœŸæ­£**ç†è§£ Hooks çš„è®¾è®¡åŠ¨æœºä¸å®ç°åŸç†**ã€‚
ä»¥ä¸‹æ˜¯å®Œæ•´æ–‡ç« è‰ç¨¿ï¼ˆNature é£æ ¼é€»è¾‘æ¸…æ™°ã€æŠ€æœ¯ç»†èŠ‚å……å®ã€è¯­å¥è‡ªç„¶æµç•…ï¼‰ã€‚

---

# React Hooks ä»ç†è§£åˆ°å®ç°

### â€”â€” ä»è®¾è®¡åŠ¨æœºåˆ° useState / useEffect çš„åº•å±‚åŸç†å‰–æ

## ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Hooks

React è‡ª 16.8 èµ·å¼•å…¥ Hooksï¼Œè¿™ä¸€æ”¹åŠ¨å‡ ä¹é‡æ–°å®šä¹‰äº†å‡½æ•°ç»„ä»¶çš„èƒ½åŠ›ã€‚
åœ¨æ­¤ä¹‹å‰ï¼Œ**ç±»ç»„ä»¶ï¼ˆclass componentï¼‰** æ˜¯å”¯ä¸€èƒ½ä½¿ç”¨çŠ¶æ€ï¼ˆstateï¼‰ä¸ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼ã€‚éšç€é¡¹ç›®å¤æ‚åº¦å¢åŠ ï¼Œç±»ç»„ä»¶æš´éœ²å‡ºä¸‰å¤§ç—›ç‚¹ï¼š

1. **é€»è¾‘å¤ç”¨å›°éš¾**
   ç»„ä»¶é—´å…±äº«é€»è¾‘éœ€è¦é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æˆ– render propsï¼Œè¿™ä¼šè®©å±‚çº§è¿‡æ·±ã€ä»£ç å¯è¯»æ€§ä¸‹é™ã€‚

2. **çŠ¶æ€é€»è¾‘åˆ†æ•£**
   ç”Ÿå‘½å‘¨æœŸå‡½æ•° `componentDidMount`ã€`componentDidUpdate`ã€`componentWillUnmount` å¸¸å¸¸äº¤ç»‡åœ¨ä¸€èµ·ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚

3. **ç±»ç»„ä»¶è¯­ä¹‰å¤æ‚**
   `this` çš„ç»‘å®šã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€ç»§æ‰¿è¯­ä¹‰ï¼Œéƒ½è®©ä»£ç æ›´åå‘ OOPï¼Œè€Œéå‡½æ•°å¼ç¼–ç¨‹ã€‚

React å›¢é˜Ÿå¸Œæœ›å¼•å…¥ä¸€ç§**åœ¨å‡½æ•°ä¸­ä½¿ç”¨çŠ¶æ€ä¸å‰¯ä½œç”¨çš„æœºåˆ¶**ï¼Œ
æ—¢èƒ½ä¿æŒå‡½æ•°ç»„ä»¶çš„ç®€æ´ï¼Œåˆèƒ½æ»¡è¶³çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ä¸é€»è¾‘å¤ç”¨çš„éœ€æ±‚ã€‚
äºæ˜¯ï¼ŒHooks å‡ºç°äº†ã€‚

ç®€è¨€ä¹‹ï¼š

> Hooks = è®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰ç±»ç»„ä»¶çš„èƒ½åŠ›ï¼ŒåŒæ—¶æ›´çº¯ã€æ›´å¯ç»„åˆã€‚

---

## äºŒã€Hooks çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ

Hooks çš„è¯ç”Ÿå¹¶éå•çº¯ API æ”¹è¿›ï¼Œè€Œæ˜¯æ¶æ„ä¸Šçš„é©å‘½ã€‚å…¶èƒŒåæœ‰ä¸‰æ¡æ ¸å¿ƒç†å¿µï¼š

1. **æŒ‰é€»è¾‘ç»„ç»‡ä»£ç ï¼Œè€Œéç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†æ•£é€»è¾‘**
   å¤šä¸ªç›¸å…³çŠ¶æ€é€»è¾‘å¯ç»„åˆä¸ºä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œä¾‹å¦‚ï¼š

   ```js
   function useWindowSize() {
     const [width, setWidth] = useState(window.innerWidth);
     useEffect(() => {
       const onResize = () => setWidth(window.innerWidth);
       window.addEventListener('resize', onResize);
       return () => window.removeEventListener('resize', onResize);
     }, []);
     return width;
   }
   ```

   ä½¿ç”¨æ—¶åªéœ€ `const width = useWindowSize()`ï¼Œé€»è¾‘æ¸…æ™°ä¸”å¯å¤ç”¨ã€‚

2. **çŠ¶æ€ä¸å‰¯ä½œç”¨åŸºäºè°ƒç”¨é¡ºåºç¡®å®šï¼Œè€Œéå˜é‡åæˆ– ID**
   React å†…éƒ¨ä¸ä½¿ç”¨â€œå˜é‡åæŸ¥æ‰¾â€ï¼Œè€Œæ˜¯æ ¹æ® Hook è°ƒç”¨é¡ºåºä¾æ¬¡å–å‡ºå¯¹åº”çŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯â€œHook ä¸èƒ½å†™åœ¨æ¡ä»¶è¯­å¥ä¸­â€çš„æ ¹æœ¬åŸå› ã€‚

3. **Fiber ä¸ Hook é“¾è¡¨ï¼šä¸€æ¬¡æ¸²æŸ“å¯¹åº”ä¸€æ¬¡ Hook çŠ¶æ€å¿«ç…§**
   æ¯æ¬¡æ¸²æŸ“ï¼Œå‡½æ•°ç»„ä»¶éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼ŒReact é€šè¿‡ç»´æŠ¤ä¸€æ¡ Hook é“¾è¡¨è®°å½•å„çŠ¶æ€ï¼Œä¿è¯åŒä¸€ Hook è°ƒç”¨èƒ½æ‹¿åˆ°ä¸Šä¸€æ¬¡å¯¹åº”çš„çŠ¶æ€ã€‚

---

## ä¸‰ã€ä» `useState` çœ‹ Hooks çš„å®ç°æœºåˆ¶

### 1. åŸºæœ¬ç”¨æ³•å›é¡¾

```js
function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œ`useState` ä»è¿”å›æœ€æ–°çš„çŠ¶æ€ã€‚
ä½†é—®é¢˜æ˜¯â€”â€”ç»„ä»¶å‡½æ•°æ¯æ¬¡éƒ½ä¼šè¢«é‡æ–°æ‰§è¡Œï¼Œ**çŠ¶æ€æ˜¯å¦‚ä½•â€œä¿ç•™ä¸‹æ¥â€çš„ï¼Ÿ**

### 2. Fiber ä¸ Hook é“¾è¡¨

React çš„æ¯ä¸ªå‡½æ•°ç»„ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå…³é”®å±æ€§ï¼š

* `fiber.memoizedState`ï¼šæŒ‡å‘è¯¥ç»„ä»¶ç¬¬ä¸€ä¸ª Hook
* æ¯ä¸ª Hook ç»“æ„ç±»ä¼¼ï¼š

  ```js
  hook = {
    memoizedState: any,    // å½“å‰çŠ¶æ€å€¼
    queue: { ... },        // æ›´æ–°é˜Ÿåˆ—
    next: hook | null      // æŒ‡å‘ä¸‹ä¸€ä¸ª Hookï¼ˆé“¾è¡¨ç»“æ„ï¼‰
  }
  ```

å½“ç»„ä»¶æ‰§è¡Œæ—¶ï¼ŒReact å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå…¨å±€æŒ‡é’ˆ `currentlyRenderingFiber` å’Œ `workInProgressHook`ï¼š

* åˆæ¬¡æ¸²æŸ“æ—¶ï¼šåˆ›å»ºæ–°çš„ Hook å¯¹è±¡å¹¶æŒ‚åˆ° fiber.memoizedState é“¾è¡¨ä¸­ã€‚
* æ›´æ–°æ—¶ï¼šæ ¹æ®è°ƒç”¨é¡ºåºé€ä¸ªå–å‡º Hook èŠ‚ç‚¹ï¼Œè¯»å–å…¶ä¸­çš„çŠ¶æ€ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ **Hooks å¿…é¡»åœ¨é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½æ”¾åœ¨æ¡ä»¶è¯­å¥ä¸­**ã€‚
å¦‚æœè°ƒç”¨é¡ºåºæ”¹å˜ï¼Œé“¾è¡¨å¯¹åº”å…³ç³»å°±ä¼šé”™ä¹±ï¼ŒçŠ¶æ€å–é”™ä½ç½®ã€‚

### 3. `useState` çš„å®ç°æ ¸å¿ƒ

ç®€åŒ–ç‰ˆå®ç°ï¼ˆè¿‘ä¼¼ä¼ªä»£ç ï¼‰å¦‚ä¸‹ï¼š

```js
let currentlyRenderingFiber = null;
let workInProgressHook = null;

function useState(initialState) {
  const hook = mountWorkInProgressHook();
  if (!hook.memoizedState) hook.memoizedState = initialState;

  const setState = (action) => {
    // åˆ›å»ºæ›´æ–°å¯¹è±¡
    const update = { action, next: null };

    // å°† update åŠ å…¥ queue
    const queue = hook.queue || (hook.queue = { pending: null });
    if (queue.pending === null) {
      update.next = update;
    } else {
      update.next = queue.pending.next;
      queue.pending.next = update;
    }
    queue.pending = update;

    // è§¦å‘æ›´æ–°
    scheduleUpdateOnFiber(currentlyRenderingFiber);
  };

  return [hook.memoizedState, setState];
}
```

`setState` çš„æœ¬è´¨ï¼šåˆ›å»ºä¸€ä¸ª update å¯¹è±¡ï¼ˆåŒ…å«actionç­‰ï¼‰åŠ å…¥é˜Ÿåˆ—ï¼Œ
React è°ƒåº¦ç³»ç»Ÿéšåæ‰§è¡Œ **render phase**ï¼Œé‡æ–°è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œ
åœ¨æ–°çš„ render ä¸­ï¼Œ`useState` ä¼šå–å‡ºè¯¥ Hook å¯¹åº”çš„ update é˜Ÿåˆ—ï¼Œè®¡ç®—æœ€æ–°çŠ¶æ€ï¼š

```js
function processUpdateQueue(queue, prevState) {
  let update = queue.pending.next;
  let newState = prevState;
  do {
    const action = update.action;
    newState = typeof action === 'function' ? action(newState) : action;
    update = update.next;
  } while (update !== queue.pending.next);
  return newState;
}
```

å¦‚æ­¤ï¼ŒReact å®ç°äº†â€œå‡½æ•°ç»„ä»¶ä¹Ÿèƒ½æœ‰çŠ¶æ€â€çš„èƒ½åŠ›ã€‚
è¿™æ•´å¥—æœºåˆ¶ä¾èµ– **é“¾è¡¨ç»“æ„ + è°ƒç”¨é¡ºåº + Fiber ä¸Šçš„çŠ¶æ€å¿«ç…§**ã€‚

---

## å››ã€ä» `useEffect` çœ‹å‰¯ä½œç”¨çš„è°ƒåº¦æœºåˆ¶

### 1. å‰¯ä½œç”¨ä¸æ¸²æŸ“çš„å…³ç³»

åœ¨ React è®¾è®¡ä¸­ï¼Œ**æ¸²æŸ“åº”å½“æ˜¯çº¯å‡½æ•°**ï¼š
åŒæ ·çš„è¾“å…¥ï¼ˆprops, stateï¼‰åº”äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼ˆUIï¼‰ã€‚
ä½†å‰¯ä½œç”¨ï¼ˆå¦‚è®¢é˜…ã€DOM æ“ä½œã€ç½‘ç»œè¯·æ±‚ï¼‰ä¼šå½±å“å¤–éƒ¨ä¸–ç•Œï¼Œå› æ­¤ä¸èƒ½åœ¨æ¸²æŸ“æ—¶æ‰§è¡Œã€‚
`useEffect` è¢«è®¾è®¡ä¸ºåœ¨ **commit é˜¶æ®µ** ç»Ÿä¸€æ‰§è¡Œã€‚

### 2. useEffect çš„æ ¸å¿ƒé€»è¾‘

å…¶å†…éƒ¨åŒæ ·ä¾é™„åœ¨ Hook é“¾è¡¨ä¸Šï¼Œæ¯ä¸ª effect Hook ä¼šè®°å½•ï¼š

```js
{
  tag: EffectTag,                  // æ ‡è¯†ç±»å‹ï¼Œå¦‚ PassiveEffect
  create: () => destroy | void,    // å‰¯ä½œç”¨å‡½æ•°
  destroy: (() => void) | null,    // æ¸…ç†å‡½æ•°
  deps: any[] | null,              // ä¾èµ–æ•°ç»„
  next: Effect | null
}
```

React åœ¨æ¸²æŸ“å®Œæˆåï¼ˆå³ commit é˜¶æ®µï¼‰ç»Ÿä¸€éå† effect é“¾è¡¨ï¼š

* å¯¹æ¯”ä¾èµ–æ•°ç»„æ˜¯å¦å˜åŒ–ï¼›
* è‹¥å˜åŒ–ï¼Œå…ˆæ‰§è¡Œä¸Šä¸€æ¬¡çš„ `destroy`ï¼›
* å†æ‰§è¡Œæ–°çš„ `create` å‡½æ•°ï¼›
* å¹¶åœ¨ç»„ä»¶å¸è½½æ—¶å†æ¬¡æ‰§è¡Œ `destroy`ã€‚

ç®€åŒ–æµç¨‹å¦‚ä¸‹ï¼š

```js
function commitHookEffectListUnmount(tag, finishedWork) {
  // å¸è½½æ—¶æ‰§è¡Œ destroy
}

function commitHookEffectListMount(tag, finishedWork) {
  // æŒ‚è½½åæ‰§è¡Œ create
}
```

é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒReact å°†å‰¯ä½œç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸ç»„ä»¶æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸè§£è€¦ï¼Œå®ç°äº†å¯é¢„æµ‹çš„æ›´æ–°è¡Œä¸ºã€‚

---

## äº”ã€Hooks çš„çº¦æŸä¸å“²å­¦

Hooks çš„è®¾è®¡æå…·å“²å­¦æ€§ï¼ŒReact å®˜æ–¹æ˜ç¡®äº†å‡ æ¡è§„åˆ™ï¼š

1. **åªåœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ Hooks**
   ä¿è¯ Hook é“¾è¡¨ç»“æ„ç¨³å®šã€‚

2. **åªåœ¨ React å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨ Hooks**
   ä¿è¯çŠ¶æ€ç®¡ç†åœ¨ React çš„ Fiber æ ‘ä¸­å—æ§ã€‚

3. **Hook æ˜¯ä¸€ç§çŠ¶æ€æœºæ˜ å°„æœºåˆ¶ï¼Œè€Œéé­”æ³•**
   æ¯æ¬¡è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼ŒReact éƒ½åŸºäºä¸Šæ¬¡çš„ Hook é“¾è¡¨â€œé‡æ”¾â€çŠ¶æ€ã€‚
   å› æ­¤ Hooks çš„æ ¸å¿ƒæ€æƒ³å…¶å®æ˜¯ï¼š

   > **åœ¨çº¯å‡½æ•°çš„ä¸–ç•Œé‡Œï¼Œæ¨¡æ‹Ÿå‡ºå¸¦è®°å¿†çš„è¡Œä¸ºã€‚**

---

## å…­ã€æ€»ç»“ï¼šä»ç†å¿µåˆ°å®ç°

| å±‚é¢   | ä¼ ç»Ÿç±»ç»„ä»¶                | Hooks æœºåˆ¶                       |
| ---- | -------------------- | ------------------------------ |
| çŠ¶æ€å­˜å‚¨ | this.state           | Fiber.memoizedState é“¾è¡¨         |
| çŠ¶æ€æ›´æ–° | setState()           | dispatchAction()ï¼ˆè§¦å‘ update é˜Ÿåˆ—ï¼‰ |
| ç”Ÿå‘½å‘¨æœŸ | Mount/Update/Unmount | useEffect + useLayoutEffect    |
| é€»è¾‘å¤ç”¨ | HOC / Render Props   | è‡ªå®šä¹‰ Hook                       |
| ç¼–ç¨‹èŒƒå¼ | OOP                  | å‡½æ•°å¼ç¼–ç¨‹                          |

React Hooks ä¸åªæ˜¯ API ä¼˜åŒ–ï¼Œè€Œæ˜¯è®©å‡½æ•°ç»„ä»¶æˆä¸ºä¸€ç­‰å…¬æ°‘çš„å…³é”®ä¸€æ­¥ã€‚
å®ƒé€šè¿‡ **é“¾è¡¨ç»“æ„ä¿å­˜çŠ¶æ€ã€é€šè¿‡è°ƒç”¨é¡ºåºå®šä½ Hookã€é€šè¿‡è°ƒåº¦æœºåˆ¶æ§åˆ¶å‰¯ä½œç”¨æ‰§è¡Œæ—¶æœº**ï¼Œ
åœ¨æ¶æ„å±‚é¢å®ç°äº† **â€œå£°æ˜å¼çŠ¶æ€ç®¡ç† + å¯ç»„åˆé€»è¾‘å¤ç”¨â€** çš„ç†æƒ³ã€‚

æ­£å¦‚ Dan Abramov æ‰€è¨€ï¼š

> â€œHooks è®©ä½ åœ¨ä¸æ”¹å˜ç»„ä»¶å±‚çº§ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨é€»è¾‘ã€‚â€

è€Œç†è§£å…¶åº•å±‚æœºåˆ¶ï¼Œæ˜¯æ·±å…¥ React æ¶æ„çš„æœ€ä½³å…¥å£ã€‚

---

## ä¸ƒã€å»¶ä¼¸é˜…è¯»

* [Dan Abramov â€“ Making Sense of React Hooks](https://reactjs.org/docs/hooks-intro.html)
* [React Fiber Architecture](https://github.com/acdlite/react-fiber-architecture)
* [React Source Code â€“ react-reconciler/hooks.js](https://github.com/facebook/react)

---


## é€šç”¨çš„ Hook èŠ‚ç‚¹ç»“æ„

æ¯ä¸ª Hook è°ƒç”¨éƒ½ä¼šå¯¹åº”ä¸€ä¸ªè¿‘ä¼¼å¦‚ä¸‹çš„æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼š
```typescript
type Hook = {
  memoizedState: any,   // è¯¥ Hook åœ¨â€œæœ¬æ¬¡å®Œæˆæ¸²æŸ“åçš„çŠ¶æ€å¿«ç…§â€ï¼ˆå¤šæ€ï¼šä¸åŒ Hook å«ä¹‰ä¸åŒï¼‰
  baseState?: any,      // ï¼ˆé’ˆå¯¹ state/reducerï¼‰è·³è¿‡ä¼˜å…ˆçº§æ—¶çš„åŸºçº¿çŠ¶æ€ï¼Œç”¨äºå¢é‡è®¡ç®—
  baseQueue?: Update | null, // ï¼ˆé’ˆå¯¹ state/reducerï¼‰ä½ä¼˜å…ˆçº§æ®‹ç•™æ›´æ–°å½¢æˆçš„åŸºçº¿é˜Ÿåˆ—
  queue?: UpdateQueue | null, // ï¼ˆé’ˆå¯¹ state/reducerï¼‰è¯¥ Hook ç‹¬æœ‰çš„â€œæ›´æ–°é˜Ÿåˆ—â€
  next: Hook | null,    // æŒ‡å‘ä¸‹ä¸€ä¸ª Hook â€”â€” å½¢æˆå•å‘é“¾è¡¨
}
```


- memoizedStateï¼šæœ€æ ¸å¿ƒï¼Œè¡¨ç¤ºè¯¥ Hook çš„â€œå·²æäº¤çŠ¶æ€â€ã€‚ä¸åŒ Hook ç±»å‹å«ä¹‰ä¸åŒï¼ˆè§ç¬¬ 4 èŠ‚ï¼‰ã€‚

- baseState / baseQueueï¼šå¹¶å‘è°ƒåº¦ä¸‹çš„â€œå¢é‡æ¸²æŸ“ä¿åº•â€æœºåˆ¶ï¼Œé¿å…æŸäº›ä½ä¼˜å…ˆçº§æ›´æ–°è¢«è·³è¿‡åä¸¢ä¿¡æ¯ã€‚

- queueï¼šä»… useState / useReducer å­˜åœ¨ï¼Œç”¨æ¥å­˜å‚¨æœªå¤„ç†çš„æ›´æ–°ï¼ˆä¸‹èŠ‚è¯¦è¿°ï¼‰ã€‚

- nextï¼šæŠŠæœ¬ç»„ä»¶å†…æ‰€æœ‰ Hook ä¸²æˆé“¾è¡¨ï¼Œä¸¥æ ¼ä¾èµ– è°ƒç”¨é¡ºåºã€‚

### ä¸åŒ Hook çš„ memoizedState å«ä¹‰ä¸€è§ˆ

memoizedState æ˜¯ â€œè¿™ä¸ª Hook çš„å·²æäº¤å¿«ç…§â€ï¼Œå…·ä½“å½¢æ€éš Hook ç±»å‹ä¸åŒï¼š

Hook	hook.memoizedState çš„å†…å®¹
useState	ä¿å­˜å½“å‰ state å€¼ï¼ˆä¾‹å¦‚ number/string/objectï¼‰ã€‚
useReducer	ä¿å­˜å½“å‰ state å€¼ï¼›æ­¤å¤– queue.lastRenderedReducer/State ä¼šè®°ä½ä¸Šæ¬¡ç”¨äºä¼˜åŒ–çš„ reducer ä¸ç»“æœã€‚
useRef	ä¿å­˜ ref å¯¹è±¡ï¼š{ current: T }ã€‚æ³¨æ„ï¼šåŒä¸€æ¬¡æ¸²æŸ“å†…ï¼Œref å¯¹è±¡ç¨³å®šä¸å˜ã€‚
useEffect	ä¿å­˜ä¸€ä¸ª Effect èŠ‚ç‚¹ï¼ˆæˆ–ä¸€ä¸ªä»¥ next ä¸²èµ·çš„ç¯ï¼‰ï¼š{ tag, create, destroy, deps, next }ã€‚deps ä¿å­˜ä¾èµ–æ•°ç»„å¿«ç…§ã€‚
useLayoutEffect	åŒ useEffectï¼Œåªæ˜¯ æ‰§è¡Œæ—¶æœºä¸åŒï¼ˆcommit åŒæ­¥é˜¶æ®µ vs. layout é˜¶æ®µï¼‰ã€‚
useMemo	å½¢å¦‚ [value, deps] çš„æ•°ç»„å¿«ç…§ï¼›åªæœ‰åœ¨ä¾èµ–å˜æ›´æ—¶æ‰é‡ç®—ã€‚
useCallback	å½¢å¦‚ [callback, deps] çš„æ•°ç»„å¿«ç…§ï¼›ä¾èµ–ä¸å˜åˆ™è¿”å›åŒä¸€å‡½æ•°å¼•ç”¨ã€‚
useTransition	ä¿å­˜å†…éƒ¨å°çŠ¶æ€ï¼ˆå¦‚ isPendingï¼‰ä¸ startTransition çš„é—­åŒ…ä¸Šä¸‹æ–‡ã€‚
useDeferredValue	ä¿å­˜â€œå»¶è¿Ÿç‰ˆæœ¬â€çš„å€¼ä¸ç›¸å…³ä¼˜å…ˆçº§å…ƒæ•°æ®ã€‚

å°ç»“ï¼šåŒä¸€å­—æ®µå memoizedStateï¼Œæ ¹æ® Hook ç±»å‹æ‰¿è½½ä¸åŒæ•°æ®å½¢æ€ï¼›è¿™æ˜¯ Hook æŠ½è±¡çš„â€œå¤šæ€æ€§â€ã€‚

# å‚è€ƒ
[GPT](https://chatgpt.com/share/68ec6d41-8ad4-8011-b96b-2ed185695e42)